<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Frontend communication · Nurse Scheduling Problem Solver</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Nurse Scheduling Problem Solver</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Nurse Scheduling Solver</a></li><li class="is-active"><a class="tocitem" href>Frontend communication</a><ul class="internal"><li><a class="tocitem" href="#Server&#39;s-endpoints"><span>Server&#39;s endpoints</span></a></li><li><a class="tocitem" href="#Finding-issues"><span>Finding issues</span></a></li><li><a class="tocitem" href="#Shifts-types"><span>Shifts types</span></a></li><li><a class="tocitem" href="#Passing-holidays"><span>Passing holidays</span></a></li><li><a class="tocitem" href="#Daytime/night-handling"><span>Daytime/night handling</span></a></li><li><a class="tocitem" href="#Workers&#39;-teams"><span>Workers&#39; teams</span></a></li><li><a class="tocitem" href="#Custom-penalties"><span>Custom penalties</span></a></li></ul></li><li><a class="tocitem" href="../scoring/">Scoring (penalting)</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Frontend communication</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Frontend communication</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Project-Summer-AI-Lab-Glider/nurse-scheduling-problem-solver/blob/master/docs/src/communication.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Frontend-communication"><a class="docs-heading-anchor" href="#Frontend-communication">Frontend communication</a><a id="Frontend-communication-1"></a><a class="docs-heading-anchor-permalink" href="#Frontend-communication" title="Permalink"></a></h1><hr/><h2 id="Server&#39;s-endpoints"><a class="docs-heading-anchor" href="#Server&#39;s-endpoints">Server&#39;s endpoints</a><a id="Server&#39;s-endpoints-1"></a><a class="docs-heading-anchor-permalink" href="#Server&#39;s-endpoints" title="Permalink"></a></h2><ul><li><p>POST <code>/fix_schedule</code></p><p>body - JSON - schedule</p><p>response - JSON - repaired_schedule</p></li><li><p>POST <code>/schedule_errors</code></p><p>body - JSON - schedule</p><p>response - JSON - errors</p></li></ul><h2 id="Finding-issues"><a class="docs-heading-anchor" href="#Finding-issues">Finding issues</a><a id="Finding-issues-1"></a><a class="docs-heading-anchor-permalink" href="#Finding-issues" title="Permalink"></a></h2><p>The broken constraints are tracked, and the information is passed to the frontend in a JSON list.</p><p>The table of error codes and their description:</p><table><tr><th style="text-align: right">Constraints</th><th style="text-align: center">Code</th><th style="text-align: right">Other keys</th></tr><tr><td style="text-align: right">Always at least one nurse</td><td style="text-align: center">AON</td><td style="text-align: right">day::Int, segments::Vector{[segment<em>begin, segment</em>end]}</td></tr><tr><td style="text-align: right">Workers number during daytime</td><td style="text-align: center">WND</td><td style="text-align: right">day::Int, required::Int, actual::Int</td></tr><tr><td style="text-align: right">Workers number during night</td><td style="text-align: center">WNN</td><td style="text-align: right">day::Int, required::Int, actual::Int</td></tr><tr><td style="text-align: right">Disallowed shift sequence</td><td style="text-align: center">DSS</td><td style="text-align: right">day::Int, worker::String, preceding::Shift, succeeding::Shift</td></tr><tr><td style="text-align: right">Lacking long break</td><td style="text-align: center">LLB</td><td style="text-align: right">week::Int, worker::String</td></tr><tr><td style="text-align: right">Worker undertime hours</td><td style="text-align: center">WUH</td><td style="text-align: right">hours::Int, worker::String</td></tr><tr><td style="text-align: right">Worker overtime hours</td><td style="text-align: center">WOH</td><td style="text-align: right">hours::Int, worker::String</td></tr><tr><td style="text-align: right">Worker teams collision</td><td style="text-align: center">WTC</td><td style="text-align: right">day::Int, hour::Int, workers::Vector{String}</td></tr></table><p>The exemplary JSON list of the broken constraints:</p><pre><code class="language-json">[
    {
      &quot;code&quot;: &quot;WND&quot;,
      &quot;day&quot;: 7,
      &quot;required&quot;: 4,
      &quot;actual&quot;: 3
    },
    {
      &quot;code&quot;: &quot;LLB&quot;,
      &quot;worker&quot;: &quot;babysitter_7&quot;,
      &quot;week&quot;: 1
    },
    {
      &quot;code&quot;: &quot;DSS&quot;,
      &quot;day&quot;: 4,
      &quot;worker&quot;: &quot;nurse_4&quot;,
      &quot;preceding&quot;: &quot;DN&quot;,
      &quot;succeeding&quot;: &quot;P&quot;
    }
]</code></pre><h2 id="Shifts-types"><a class="docs-heading-anchor" href="#Shifts-types">Shifts types</a><a id="Shifts-types-1"></a><a class="docs-heading-anchor-permalink" href="#Shifts-types" title="Permalink"></a></h2><p>All shifts that should be recognized by the solver must be provided in the schedule&#39;s JSON under the <strong>shift_types</strong> key:</p><pre><code class="language-json">&quot;shift_types&quot;: {
    &quot;R&quot;: {
        &quot;from&quot;: 7,
        &quot;to&quot;: 15,
        &quot;is_working_shift&quot;: true
    },
    &quot;P&quot;: {
        &quot;from&quot;: 15,
        &quot;to&quot;: 19,
        &quot;is_working_shift&quot;: true
    }, ...
}</code></pre><p>The keys are shift codes and the values are dictionaries containing the following entries:</p><table><tr><th style="text-align: right">Key</th><th style="text-align: right">Value</th></tr><tr><td style="text-align: right">from</td><td style="text-align: right">Hour (1-24) when a shift begins</td></tr><tr><td style="text-align: right">to</td><td style="text-align: right">Hour (1-24) when a shift ends</td></tr><tr><td style="text-align: right">is<em>working</em>shift</td><td style="text-align: right">Boolean value whether it is a working shift</td></tr></table><h2 id="Passing-holidays"><a class="docs-heading-anchor" href="#Passing-holidays">Passing holidays</a><a id="Passing-holidays-1"></a><a class="docs-heading-anchor-permalink" href="#Passing-holidays" title="Permalink"></a></h2><p>Occurrences of national holidays impact scoring due to the reduced number of working hours. The information about them can be passed in schedule JSON under the <strong>month_info</strong> key as an array of day indices:</p><pre><code class="language-json">&quot;month_info&quot;: {
    &quot;holidays&quot;: [7, 15, ...],
    ...
}</code></pre><h2 id="Daytime/night-handling"><a class="docs-heading-anchor" href="#Daytime/night-handling">Daytime/night handling</a><a id="Daytime/night-handling-1"></a><a class="docs-heading-anchor-permalink" href="#Daytime/night-handling" title="Permalink"></a></h2><p>The start of daytime and night can be adjusted by providing the information in the input. Otherwise, the default configuration works (day starts at 6 and night at 22).</p><pre><code class="language-JSON">&quot;month_info&quot;: {
    &quot;day_begin&quot; : 6,
    &quot;night_begin&quot; : 22,
    ...
}</code></pre><h2 id="Workers&#39;-teams"><a class="docs-heading-anchor" href="#Workers&#39;-teams">Workers&#39; teams</a><a id="Workers&#39;-teams-1"></a><a class="docs-heading-anchor-permalink" href="#Workers&#39;-teams" title="Permalink"></a></h2><p>Teams are passed in the <em>team</em> dictionary inside the ___employee_info___. If such is not provided, the algorithm will not evaluate teams collisions.</p><pre><code class="language-JSON">  &quot;employee_info&quot;: {
      ...
        &quot;team&quot;: {
            &quot;nurse_1&quot;:  &quot;NURSE&quot;,
            &quot;nurse_2&quot;:  &quot;NURSE&quot;,
            &quot;babysitter_1&quot;: &quot;OTHER&quot;,
            &quot;babysitter_2&quot;: &quot;OTHER&quot;
        },
      ...</code></pre><h2 id="Custom-penalties"><a class="docs-heading-anchor" href="#Custom-penalties">Custom penalties</a><a id="Custom-penalties-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-penalties" title="Permalink"></a></h2><p>The process of automated fixing a schedule can be controlled in terms of removing particular issues before others. Each of the constraints has its weight (look at the table below). These with higher are considered as more important errors. The weights themselves can not be changed, but the priorities can by providing an ordered list of constraints&#39; codes (from the highest priority to the lowest).</p><pre><code class="language-json">&quot;penalty_priorities&quot; : [
    &quot;AON&quot;,
    &quot;WND&quot;,
    &quot;WNN&quot;,
    &quot;LLB&quot;,
    &quot;DSS&quot;
]</code></pre><p>If priority code is not listed, the solver will set weight as 0 and will not return any errors related to that code.</p><table><tr><th style="text-align: right">Penalty</th><th style="text-align: right">Code</th><th style="text-align: center">default weight</th></tr><tr><td style="text-align: right">Lacking nurse</td><td style="text-align: right">AON</td><td style="text-align: center">60</td></tr><tr><td style="text-align: right">Lacking worker during daytime</td><td style="text-align: right">WND</td><td style="text-align: center">50</td></tr><tr><td style="text-align: right">Lacking worker during night</td><td style="text-align: right">WNN</td><td style="text-align: center">40</td></tr><tr><td style="text-align: right">Lacking long break</td><td style="text-align: right">LLB</td><td style="text-align: center">30</td></tr><tr><td style="text-align: right">Worker teams collision</td><td style="text-align: right">WTC</td><td style="text-align: center">20</td></tr><tr><td style="text-align: right">Disallowed shift sequence</td><td style="text-align: right">DSS</td><td style="text-align: center">10</td></tr></table></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Nurse Scheduling Solver</a><a class="docs-footer-nextpage" href="../scoring/">Scoring (penalting) »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 18 April 2021 18:57">Sunday 18 April 2021</span>. Using Julia version 1.5.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
