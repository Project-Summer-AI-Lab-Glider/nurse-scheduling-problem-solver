var documenterSearchIndex = {"docs":
[{"location":"communication/#Frontend-communication","page":"Frontend communication","title":"Frontend communication","text":"","category":"section"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"","category":"page"},{"location":"communication/#Server's-endpoints","page":"Frontend communication","title":"Server's endpoints","text":"","category":"section"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"POST /fix_schedule\nbody - JSON - schedule\nresponse - JSON - repaired_schedule\nPOST /schedule_errors\nbody - JSON - schedule\nresponse - JSON - errors","category":"page"},{"location":"communication/#Finding-issues","page":"Frontend communication","title":"Finding issues","text":"","category":"section"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"The broken constraints are tracked, and the information is passed to the frontend in a JSON list.","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"The table of error codes and their description:","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"Constraints Code Other keys\nAlways at least one nurse AON day::Int, segments::Vector{[segmentbegin, segmentend]}\nWorkers number during daytime WND day::Int, required::Int, actual::Int\nWorkers number during night WNN day::Int, required::Int, actual::Int\nDisallowed shift sequence DSS day::Int, worker::String, preceding::Shift, succeeding::Shift\nLacking long break LLB week::Int, worker::String\nWorker undertime hours WUH hours::Int, worker::String\nWorker overtime hours WOH hours::Int, worker::String\nWorker teams collision WTC day::Int, hour::Int, workers::Vector{String}","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"The exemplary JSON list of the broken constraints:","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"[\n    {\n      \"code\": \"WND\",\n      \"day\": 7,\n      \"required\": 4,\n      \"actual\": 3\n    },\n    {\n      \"code\": \"LLB\",\n      \"worker\": \"babysitter_7\",\n      \"week\": 1\n    },\n    {\n      \"code\": \"DSS\",\n      \"day\": 4,\n      \"worker\": \"nurse_4\",\n      \"preceding\": \"DN\",\n      \"succeeding\": \"P\"\n    }\n]","category":"page"},{"location":"communication/#Shifts-types","page":"Frontend communication","title":"Shifts types","text":"","category":"section"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"All shifts that should be recognized by the solver must be provided in the schedule's JSON under the shift_types key:","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"\"shift_types\": {\n    \"R\": {\n        \"from\": 7,\n        \"to\": 15,\n        \"is_working_shift\": true\n    },\n    \"P\": {\n        \"from\": 15,\n        \"to\": 19,\n        \"is_working_shift\": true\n    }, ...\n}","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"The keys are shift codes and the values are dictionaries containing the following entries:","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"Key Value\nfrom Hour (1-24) when a shift begins\nto Hour (1-24) when a shift ends\nisworkingshift Boolean value whether it is a working shift","category":"page"},{"location":"communication/#Passing-holidays","page":"Frontend communication","title":"Passing holidays","text":"","category":"section"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"Occurrences of national holidays impact scoring due to the reduced number of working hours. The information about them can be passed in schedule JSON under the month_info key as an array of day indices:","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"\"month_info\": {\n    \"holidays\": [7, 15, ...],\n    ...\n}","category":"page"},{"location":"communication/#Daytime/night-handling","page":"Frontend communication","title":"Daytime/night handling","text":"","category":"section"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"The start of daytime and night can be adjusted by providing the information in the input. Otherwise, the default configuration works (day starts at 6 and night at 22).","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"\"month_info\": {\n    \"day_begin\" : 6,\n    \"night_begin\" : 22,\n    ...\n}","category":"page"},{"location":"communication/#Workers'-teams","page":"Frontend communication","title":"Workers' teams","text":"","category":"section"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"Teams are passed in the team dictionary inside the ___employee_info___. If such is not provided, the algorithm will not evaluate teams collisions.","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"  \"employee_info\": {\n      ...\n        \"team\": {\n            \"nurse_1\":  \"NURSE\",\n            \"nurse_2\":  \"NURSE\",\n            \"babysitter_1\": \"OTHER\",\n            \"babysitter_2\": \"OTHER\"\n        },\n      ...","category":"page"},{"location":"communication/#Custom-penalties","page":"Frontend communication","title":"Custom penalties","text":"","category":"section"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"The process of automated fixing a schedule can be controlled in terms of removing particular issues before others. Each of the constraints has its weight (look at the table below). These with higher are considered as more important errors. The weights themselves can not be changed, but the priorities can by providing an ordered list of constraints' codes (from the highest priority to the lowest).","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"\"penalty_priorities\" : [\n    \"AON\",\n    \"WND\",\n    \"WNN\",\n    \"LLB\",\n    \"DSS\"\n]","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"If priority code is not listed, the solver will set weight as 0 and will not return any errors related to that code.","category":"page"},{"location":"communication/","page":"Frontend communication","title":"Frontend communication","text":"Penalty Code default weight\nLacking nurse AON 60\nLacking worker during daytime WND 50\nLacking worker during night WNN 40\nLacking long break LLB 30\nWorker teams collision WTC 20\nDisallowed shift sequence DSS 10","category":"page"},{"location":"scoring/#Scoring-(penalting)","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"","category":"section"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"","category":"page"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"The result of scoring is a sum of the following three subscores:","category":"page"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"presence - the proper number of employees and nurses during a day,\nrights - controlling the amount of free time of each worker properly,\nworking time - the magnitude of undertime and overtime of each employee.","category":"page"},{"location":"scoring/#Constraints-overview","page":"Scoring (penalting)","title":"Constraints overview","text":"","category":"section"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"always at least one nurse\nat least one staff member for each three children during daytime\nat least one staff member for each five children during night\nonly members of the same team can work simultaneously\nproper rest time between consecutive working shifts (24h, 16h and 11h)\neach worker has 35h off once a week (counted from MO to SU)\nundertime and overtime hours\nvacation and sick leave are untouchable (implicit constraint)","category":"page"},{"location":"scoring/#Employees'-presence","page":"Scoring (penalting)","title":"Employees' presence","text":"","category":"section"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"For each day, the solver evaluates the presence of all employees (workers and nurses) in the following way:","category":"page"},{"location":"scoring/#Staff's-presence:","page":"Scoring (penalting)","title":"Staff's presence:","text":"","category":"section"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"the required number of employees during daytime equals to the number of children divided by three (the number of children per worker at daytime) minus the number of extra workers,\nthe required number of employees during night equals to the number of children divided by five (the number of children per worker at night),\nthe score is increased by the PENLACKINGWORKER (default 40) multiplied by the number of employees lacking each hour.","category":"page"},{"location":"scoring/#Nurses'-presence:","page":"Scoring (penalting)","title":"Nurses' presence:","text":"","category":"section"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"it is evaluated if there is, at least, one nurse in each hour of a day,\nthe score is increased by the PENLACKINGNURSE (default 50) multiplied by the number of hours with absence of a nurse.","category":"page"},{"location":"scoring/#Teams's-presence:","page":"Scoring (penalting)","title":"Teams's presence:","text":"","category":"section"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"for each hour number of distinct teams is evaluated\nthe score is increased by the PENMULTIPLETEAMS (default 20) multiplied by the number of teams for each hour.","category":"page"},{"location":"scoring/#Employees’-rights","page":"Scoring (penalting)","title":"Employees’ rights","text":"","category":"section"},{"location":"scoring/#Disallowed-shift-sequences","page":"Scoring (penalting)","title":"Disallowed shift sequences","text":"","category":"section"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"The algorithm evaluates succession of consecutive shifts to maintain a proper free time between working shifts of employees. The disallowed shift sequence is a two-element sequence stating the two working shifts cannot happen one after another. The sequences are determined by the duration and the ending hour first shift.","category":"page"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"Working shift duration (hours) Required free time (hours)\n<=8 11\n9-12 16\n>=13 24","category":"page"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"Each disallowed sequence in a schedule increases the score by  PENDISALLOWEDSHIFT_SEQUENCE (default 10).","category":"page"},{"location":"scoring/#Long-breaks","page":"Scoring (penalting)","title":"Long breaks","text":"","category":"section"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"Each employee must have at least one long break each week. It means a sequence of working and non-working shifts gives at least 35-hour uninterrupted free time. The long breaks are evaluated only from Monday to Sunday, the break between consecutive weeks does not value.","category":"page"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"Each week lacking a long break for each employee increases the score by PENNOLONG_BREAK (default 20).","category":"page"},{"location":"scoring/#Employees’-working-time","page":"Scoring (penalting)","title":"Employees’ working time","text":"","category":"section"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"The algorithm evaluates each employees’ working time in the following way:","category":"page"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"the number of exempted days equals to the sum of holidays, sick leaves and other non-working shifts,\nthe required working time as the difference between the number of working days in a month and the exempted days multiplied by the number of hours an employee works per day (it results from employment or mandate contract),\nthe actual working time equals to the sum of worker's shift lengths.","category":"page"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"If the difference between actual and required working time is larger than MAX_OVERTIME (default 10) * daysinmonth / 7, the score is increased by the difference between the overtime and the threshold.","category":"page"},{"location":"scoring/","page":"Scoring (penalting)","title":"Scoring (penalting)","text":"If the difference between actual and required work time is smaller than MAX_UNDERTIME (default 0) * daysinmonth / 7, the total score is increased by the difference between the threshold and the undertime.","category":"page"},{"location":"#Nurse-Scheduling-Solver","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"","category":"section"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"The solver is part of the system created for Fundacja Rodzin Adopcyjnych, the pre-adoption center in Warsaw (Poland). The project was set during Project Summer AILab & Glider 2020 event and has been under intensive development since then.","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"The system aims to improve the operations of the foundation automatically, forming effective work schedules for employees. So far, this has been manually done in spreadsheets, which is a tedious job.","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"The migration to the system is realized by importing a plan from an Excel spreadsheet, which is the form, the foundation adopted earlier. If this is impossible, the application can be incorporated without previous schedules.","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"In the current version work plans are adjusted based on the legislation of Polish Labour Code for medical staff.","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"The system comprises three components which can be found on two GitHub repositories:","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"web/desktop application provides the environment for convenient preparation of work schedules (detailed information here)\nsolver responsible for finding issues in work schedules and fixing them automatically (not introduced yet)\nbackend (Genie framework) links the functions of both previous components","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"This repository contains the solver and the backend.","category":"page"},{"location":"#Run-solver","page":"Nurse Scheduling Solver","title":"Run solver","text":"","category":"section"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"Required Julia version: >=1.5","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"Clone the project.","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"git clone https://github.com/Project-Summer-AI-Lab-Glider/nurse-scheduling-problem-solver.git","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"Enter the project directory:","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"cd nurse-scheduling-problem-solver","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"Install dependencies","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"julia --project -E \"using Pkg; Pkg.instantiate()\"","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"Run server.","category":"page"},{"location":"","page":"Nurse Scheduling Solver","title":"Nurse Scheduling Solver","text":"julia --project src/server.jl","category":"page"}]
}
